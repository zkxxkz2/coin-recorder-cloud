# JSONBin.io 超简单配置指南

## 为什么选择 JSONBin.io？

JSONBin.io 是一个超级简单的云端存储服务，完美适合我们的需求：
- ✅ **完全免费**：无需绑定银行卡，中国大陆用户友好
- ✅ **超级简单**：只需要一个 API 密钥即可使用
- ✅ **即时可用**：注册后立即可以使用
- ✅ **JSON 存储**：完美适合我们的数据结构
- ✅ **RESTful API**：标准的 HTTP 接口
- ✅ **版本控制**：自动保存历史版本

## 1. 创建 JSONBin.io 账户

### 步骤 1：注册账户
1. 访问 [JSONBin.io 官网](https://jsonbin.io)
2. 点击 "Sign Up" 或 "Get Started"
3. 使用邮箱注册（无需验证邮箱）

### 步骤 2：获取 API 密钥
1. 注册成功后会自动跳转到控制台
2. 在控制台页面找到 "API Key" 部分
3. 复制您的 API 密钥（格式类似：`$2a$10$...`）

## 2. 配置项目

### 步骤 1：更新 `index.html`
找到以下代码并替换为您的实际 API 密钥：
```html
<!-- JSONBin.io 配置 -->
<script type="module">
    // JSONBin.io 配置 - 请替换为您的实际 API 密钥
    window.jsonbinConfig = {
        apiKey: "your-jsonbin-api-key"  // 替换为您的 API 密钥
    };
</script>
```

### 步骤 2：更新 `jsonbin-config.js`
```javascript
const jsonbinConfig = {
    baseUrl: 'https://api.jsonbin.io/v3',
    // 请替换为您的 JSONBin.io API 密钥
    apiKey: 'your-jsonbin-api-key',  // 替换为您的 API 密钥
    binId: null
};
```

## 3. 使用说明

### 注册用户
1. 点击右上角的"登录"按钮
2. 选择"注册"标签页
3. 输入用户名和密码（用户名至少3个字符，密码至少6个字符）
4. 点击"注册"按钮

### 登录用户
1. 点击右上角的"登录"按钮
2. 选择"登录"标签页
3. 输入用户名和密码
4. 点击"登录"按钮

### 数据同步
- 登录后，您的数据会自动同步到云端
- 点击同步按钮可以手动触发同步
- 在不同设备登录同一账户，数据会自动同步

## 4. 功能特性

### 认证系统
- **用户名/密码登录**：简单易用
- **本地存储**：用户信息保存在浏览器本地
- **密码加密**：密码经过简单加密处理
- **自动登录**：关闭浏览器后重新打开自动登录

### 数据同步
- **离线优先**：本地存储优先，联网后自动同步
- **实时同步**：数据变化时自动同步到云端
- **冲突解决**：云端数据优先，自动合并
- **版本控制**：JSONBin.io 自动保存历史版本

### 数据安全
- **用户隔离**：每个用户的数据完全隔离
- **API 密钥保护**：使用 API 密钥访问云端数据
- **本地加密**：敏感数据在本地加密存储

## 5. 数据结构

### 云端数据格式
```json
{
  "coinRecords": [
    {
      "date": "2024-01-01",
      "coins": 100,
      "difference": 10,
      "note": "新年第一天",
      "timestamp": 1704067200000
    }
  ],
  "streakData": {
    "currentStreak": 5,
    "longestStreak": 10,
    "lastRecordDate": "2024-01-05",
    "todayCompleted": true
  },
  "achievements": {
    "firstRecord": true,
    "weekStreak": true,
    "monthStreak": false
  },
  "challengeData": {
    "target": 1000,
    "startDate": "2024-01-01",
    "endDate": "2024-01-31",
    "currentProgress": 500,
    "completed": false
  },
  "lastSync": "2024-01-05T10:30:00.000Z"
}
```

## 6. 测试功能

### 步骤 1：启动项目
1. 使用本地服务器启动项目
2. 打开浏览器开发者工具查看控制台

### 步骤 2：测试注册
1. 点击登录按钮，选择注册
2. 输入用户名和密码
3. 检查是否注册成功

### 步骤 3：测试数据同步
1. 注册成功后，添加一些金币记录
2. 检查控制台是否有同步日志
3. 在 JSONBin.io 控制台查看是否创建了新的 bin

### 步骤 4：测试多设备同步
1. 在同一浏览器的不同标签页登录同一账户
2. 在一个标签页添加数据，检查另一个标签页是否同步
3. 或者在不同设备上测试

## 7. 常见问题

### Q: JSONBin.io 免费版本有什么限制？
A: JSONBin.io 免费版本包括：
- 1000 次 API 请求/月
- 100MB 存储空间
- 基本版本控制
- 对于个人使用完全足够

### Q: 数据安全如何保障？
A: 
- 每个用户的数据存储在独立的 bin 中
- 使用 API 密钥访问，只有知道密钥的人才能访问
- 数据在传输时使用 HTTPS 加密
- 本地敏感数据经过简单加密

### Q: 如何备份数据？
A: 
- JSONBin.io 自动保存历史版本
- 可以在控制台查看和下载历史版本
- 建议定期导出重要数据

### Q: 支持哪些浏览器？
A: 支持所有现代浏览器，包括 Chrome、Firefox、Safari、Edge 等。

### Q: 如何重置密码？
A: 目前版本不支持密码重置，建议用户妥善保管密码。如需重置，可以删除本地用户数据重新注册。

## 8. 升级建议

### 如果需要更多功能，可以考虑：

1. **添加邮箱验证**：
   - 集成邮件服务（如 EmailJS）
   - 添加密码重置功能

2. **增强安全性**：
   - 使用更强的加密算法
   - 添加二次验证

3. **扩展存储**：
   - 升级到 JSONBin.io 付费版本
   - 或迁移到其他云服务

4. **添加社交功能**：
   - 好友系统
   - 数据分享
   - 排行榜

## 9. 技术支持

- [JSONBin.io 官方文档](https://jsonbin.io/docs)
- [JSONBin.io 控制台](https://jsonbin.io/app)
- [GitHub Issues](https://github.com/jsonbin-io/jsonbin/issues)

## 10. 部署建议

### 开发环境
- 使用 `http://localhost:3000` 测试
- 在浏览器开发者工具中查看网络请求

### 生产环境
- 使用 HTTPS 域名
- 考虑使用 CDN 加速静态资源
- 定期备份重要数据

---

**注意**：请妥善保管您的 API 密钥，不要将其提交到公共代码仓库中。建议使用环境变量或配置文件管理敏感信息。
